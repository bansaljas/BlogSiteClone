{% extends 'blog/base.html' %}
  {% block title %} Blog {% endblock %}

  {% block content %}
    <h1 class="posttitle"> {{post.title}}</h1>

      {% if post.publish_date %}
          <p>{{post.publish_date}}</p>
      {% else %}
          <a class="btn btn-warning" href="{% url 'post_publish' %}">Publish</a>
      {% endif %}

     <p class='postcontent'>{{ post.text|safe|linebreaksbr}}</p>

      {% if user.is_authenticated %}
        <a class="btn btn-primary" href="{% url 'post_edit' pk=post.pk %}"><span class="fa fa-pencil"></span></a>
        <a class="btn btn-danger" href="{% url 'post_remove' pk=post.pk %}"><span class="fa fa-remove"></span></a>
      {% endif %}

       <!-- Comments   -->
       <hr>
       <div class="container">

         {% for comment in post.comments.all %}
           <br>

            {% if user.is_authenticated or comment.approve_comment %}
                <p>{{comment.text|safe|linebreaks}}</p>
                <p>Posted By: <strong>{{comment.author}}</strong> on {{comment.create_date|date:DMY}}</p>

                {% if not comment.approve_comment %}
                   <a class="btn btn-warning" href="{% url 'approve_comment' pk=comment.pk %}"><span class="fa fa-check"></span></a>
                   <a class="btn btn-danger" href="{% url 'remove_comment' pk=comment.pk %}"><span class="fa fa-remove"></span></a>
                {% endif %}

            {% endif %}

         {% empty %}
            <h4>No comments posted.</h4>
         {% endfor %}

      </div>
  {% endblock %}
